<!-- Pagination -->
<div class="flex justify-center mt-8 space-x-2">
	<a href="?page=1"
		class="px-3 py-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded hover:bg-gray-300 dark:hover:bg-gray-600">
		First
	</a>
	|
	{% if page_obj.has_previous %}
		<a href="?page={{ page_obj.previous_page_number }}"
			class="px-3 py-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded hover:bg-gray-300 dark:hover:bg-gray-600">
			Prev
		</a>
	{% endif %}

	<!-- {% for num in page_obj.paginator.page_range %}
		{% if page_obj.number == num %}
			<span class="px-3 py-1 bg-blue-600 text-white rounded">{{ num }}</span>
		{% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %} 
			<a href="?page={{ num }}"
			class="px-3 py-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded hover:bg-gray-300 dark:hover:bg-gray-600">
			{{ num }}
			</a>
		{% endif %}
	{% endfor %} -->

	{% for num in page_obj.paginator.page_range %}
		{# Always show first and last page #}
		{% if num == 1 or num == page_obj.paginator.num_pages %}
			{% if page_obj.number == num %}
				<span class="px-3 py-1 bg-blue-600 text-white rounded">{{ num }}</span>
			{% else %}
				<a href="?page={{ num }}{% if request.session.num_per_page %}&num_per_page={{ request.session.num_per_page }}{% endif %}"
				class="px-3 py-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded hover:bg-gray-300 dark:hover:bg-gray-600">
					{{ num }}
				</a>
			{% endif %}

		{# Show numbers near the current page #}
		{% elif num >= page_obj.number|add:"-2" and num <= page_obj.number|add:"2" %}
			{% if page_obj.number == num %}
				<span class="px-3 py-1 bg-blue-600 text-white rounded">{{ num }}</span>
			{% else %}
				<a href="?page={{ num }}{% if request.session.num_per_page %}&num_per_page={{ request.session.num_per_page }}{% endif %}"
				class="px-3 py-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded hover:bg-gray-300 dark:hover:bg-gray-600">
					{{ num }}
				</a>
			{% endif %}

		{# Ellipsis before current range #}
		{% elif num == 2 and page_obj.number > 4 %}
			<span class="px-3 py-1">…</span>

		{# Ellipsis after current range #}
		{% elif num == page_obj.paginator.num_pages|add:"-1" and page_obj.number < page_obj.paginator.num_pages|add:"-3" %}
			<span class="px-3 py-1">…</span>
		{% endif %}
	{% endfor %}



	{% if page_obj.has_next %}
		<a href="?page={{ page_obj.next_page_number }}"
			class="px-3 py-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded hover:bg-gray-300 dark:hover:bg-gray-600">
			Next
		</a>
	{% endif %}
	|
	<a href="?page={{ page_obj.paginator.num_pages }}"
		class="px-3 py-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded hover:bg-gray-300 dark:hover:bg-gray-600">
		Last
	</a>
	<!-- num records per page selector -->
	<!-- <div class="ml-4">
		<label for="num_per_page" class="text-gray-700 dark:text-gray-300">Records per page:</label>
		<select id="num_per_page" name="num_per_page"
			class="ml-2 px-2 py-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded hover:bg-gray-300 dark:hover:bg-gray-600"
			onchange="location.href='?page=1&num_per_page='+this.value;">
			<option value="5" {% if request.GET.num_per_page == '5' %}selected{% endif %}>5</option>
			<option value="10" {% if request.GET.num_per_page == '10' or not request.GET.num_per_page %}selected{% endif %}>10</option>
			<option value="20" {% if request.GET.num_per_page == '20' %}selected{% endif %}>20</option>
			<option value="50" {% if request.GET.num_per_page == '50' %}selected{% endif %}>50</option>
		</select>
	</div> -->
	<div class="ml-4">
		<label for="num_per_page" class="text-gray-700 dark:text-gray-300">Records per page:</label>
		<select id="num_per_page" name="num_per_page"
			class="ml-2 px-2 py-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded hover:bg-gray-300 dark:hover:bg-gray-600"
			onchange="location.href='?page=1&num_per_page='+this.value;">
			
			<option value="5"  {% if request.session.num_per_page|stringformat:"s" == "5" %}selected{% endif %}>5</option>
			<option value="10" {% if request.session.num_per_page|stringformat:"s" == "10" or not request.session.num_per_page %}selected{% endif %}>10</option>
			<option value="20" {% if request.session.num_per_page|stringformat:"s" == "20" %}selected{% endif %}>20</option>
			<option value="50" {% if request.session.num_per_page|stringformat:"s" == "50" %}selected{% endif %}>50</option>
		</select>
	</div>


</div>

<div class="flex items-center justify-between border-t border-white/10 px-4 py-3 sm:px-6 dark:bg-gray-800">
  <!-- Mobile Pagination -->
  <div class="flex flex-1 justify-between sm:hidden">
    {% if page_obj.has_previous %}
      <a href="?page={{ page_obj.previous_page_number }}{% if request.session.num_per_page %}&num_per_page={{ request.session.num_per_page }}{% endif %}"
         class="relative inline-flex items-center rounded-md border border-white/10 bg-white/5 px-4 py-2 text-sm font-medium text-gray-200 hover:bg-white/10">
        Previous
      </a>
    {% endif %}

    {% if page_obj.has_next %}
      <a href="?page={{ page_obj.next_page_number }}{% if request.session.num_per_page %}&num_per_page={{ request.session.num_per_page }}{% endif %}"
         class="relative ml-3 inline-flex items-center rounded-md border border-white/10 bg-white/5 px-4 py-2 text-sm font-medium text-gray-200 hover:bg-white/10">
        Next
      </a>
    {% endif %}
  </div>

  <!-- Desktop Pagination -->
  <div class="hidden sm:flex sm:flex-1 sm:items-center sm:justify-between">
    <!-- Showing X to Y of Z -->
    <div>
      <p class="text-sm text-gray-300">
        Showing
        <span class="font-medium">{{ page_obj.start_index }}</span>
        to
        <span class="font-medium">{{ page_obj.end_index }}</span>
        of
        <span class="font-medium">{{ page_obj.paginator.count }}</span>
        results
      </p>
    </div>

    <!-- Page Navigation + Records Selector -->
    <div class="flex items-center space-x-6">
      <!-- Records per page -->
      <div>
        <label for="num_per_page" class="text-sm text-gray-300 mr-2">Records per page:</label>
        <select id="num_per_page" name="num_per_page"
          class="rounded-md bg-white/5 px-2 py-1 text-sm text-gray-200 border border-white/10 hover:bg-white/10"
          onchange="location.href='?page=1&num_per_page='+this.value;">
          <option value="5"  {% if request.session.num_per_page|stringformat:"s" == "5" %}selected{% endif %}>5</option>
          <option value="10" {% if request.session.num_per_page|stringformat:"s" == "10" or not request.session.num_per_page %}selected{% endif %}>10</option>
          <option value="20" {% if request.session.num_per_page|stringformat:"s" == "20" %}selected{% endif %}>20</option>
          <option value="50" {% if request.session.num_per_page|stringformat:"s" == "50" %}selected{% endif %}>50</option>
        </select>
      </div>

      <!-- Pagination Nav -->
      <nav aria-label="Pagination" class="isolate inline-flex -space-x-px rounded-md">
        <!-- Prev -->
        {% if page_obj.has_previous %}
          <a href="?page={{ page_obj.previous_page_number }}{% if request.session.num_per_page %}&num_per_page={{ request.session.num_per_page }}{% endif %}"
             class="relative inline-flex items-center rounded-l-md px-2 py-2 text-gray-400 inset-ring inset-ring-gray-700 hover:bg-white/5">
            <span class="sr-only">Previous</span>
            <svg viewBox="0 0 20 20" fill="currentColor" class="size-5">
              <path d="M11.78 5.22a.75.75 0 0 1 0 1.06L8.06 10l3.72 3.72a.75.75 0 1 1-1.06 1.06l-4.25-4.25a.75.75 0 0 1 0-1.06l4.25-4.25a.75.75 0 0 1 1.06 0Z"/>
            </svg>
          </a>
        {% endif %}

        <!-- Page Numbers -->
        {% for num in page_obj.paginator.page_range %}
          {% if num == 1 or num == page_obj.paginator.num_pages or num >= page_obj.number|add:"-2" and num <= page_obj.number|add:"2" %}
            {% if page_obj.number == num %}
              <a href="?page={{ num }}{% if request.session.num_per_page %}&num_per_page={{ request.session.num_per_page }}{% endif %}"
                 aria-current="page"
                 class="relative z-10 inline-flex items-center bg-indigo-500 px-4 py-2 text-sm font-semibold text-white">
                {{ num }}
              </a>
            {% else %}
              <a href="?page={{ num }}{% if request.session.num_per_page %}&num_per_page={{ request.session.num_per_page }}{% endif %}"
                 class="relative inline-flex items-center px-4 py-2 text-sm font-semibold text-gray-200 inset-ring inset-ring-gray-700 hover:bg-white/5">
                {{ num }}
              </a>
            {% endif %}
          {% elif num == 2 and page_obj.number > 4 %}
            <span class="relative inline-flex items-center px-4 py-2 text-sm font-semibold text-gray-400">…</span>
          {% elif num == page_obj.paginator.num_pages|add:"-1" and page_obj.number < page_obj.paginator.num_pages|add:"-3" %}
            <span class="relative inline-flex items-center px-4 py-2 text-sm font-semibold text-gray-400">…</span>
          {% endif %}
        {% endfor %}

        <!-- Next -->
        {% if page_obj.has_next %}
          <a href="?page={{ page_obj.next_page_number }}{% if request.session.num_per_page %}&num_per_page={{ request.session.num_per_page }}{% endif %}"
             class="relative inline-flex items-center rounded-r-md px-2 py-2 text-gray-400 inset-ring inset-ring-gray-700 hover:bg-white/5">
            <span class="sr-only">Next</span>
            <svg viewBox="0 0 20 20" fill="currentColor" class="size-5">
              <path d="M8.22 5.22a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.75.75 0 0 1-1.06-1.06L11.94 10 8.22 6.28a.75.75 0 0 1 0-1.06Z"/>
            </svg>
          </a>
        {% endif %}
      </nav>
    </div>
  </div>
</div>

<div class="flex items-center justify-between border-t border-gray-200 dark:border-white/10 px-4 py-3 sm:px-6 bg-white dark:bg-gray-800">
  <!-- Mobile Pagination -->
  <div class="flex flex-1 justify-between sm:hidden">
    {% if page_obj.has_previous %}
      <a href="?page={{ page_obj.previous_page_number }}{% if request.session.num_per_page %}&num_per_page={{ request.session.num_per_page }}{% endif %}"
         class="relative inline-flex items-center rounded-md border border-gray-300 dark:border-white/10 bg-white dark:bg-white/5 px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-white/10">
        Previous
      </a>
    {% endif %}

    {% if page_obj.has_next %}
      <a href="?page={{ page_obj.next_page_number }}{% if request.session.num_per_page %}&num_per_page={{ request.session.num_per_page }}{% endif %}"
         class="relative ml-3 inline-flex items-center rounded-md border border-gray-300 dark:border-white/10 bg-white dark:bg-white/5 px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-white/10">
        Next
      </a>
    {% endif %}
  </div>

  <!-- Desktop Pagination -->
  <div class="hidden sm:flex sm:flex-1 sm:items-center sm:justify-between">
    <!-- Showing X to Y of Z -->
    <div>
      <p class="text-sm text-gray-600 dark:text-gray-300">
        Showing
        <span class="font-medium">{{ page_obj.start_index }}</span>
        to
        <span class="font-medium">{{ page_obj.end_index }}</span>
        of
        <span class="font-medium">{{ page_obj.paginator.count }}</span>
        results
      </p>
    </div>

    <!-- Page Navigation + Records Selector -->
    <div class="flex items-center space-x-6">
      <!-- Records per page -->
      <div>
        <label for="num_per_page" class="text-sm text-gray-600 dark:text-gray-300 mr-2">Records per page:</label>
        <select id="num_per_page" name="num_per_page"
          class="rounded-md bg-white dark:bg-white/5 px-2 py-1 text-sm text-gray-700 dark:text-gray-200 border border-gray-300 dark:border-white/10 hover:bg-gray-100 dark:hover:bg-white/10"
          onchange="location.href='?page=1&num_per_page='+this.value;">
          <option value="5"  {% if request.session.num_per_page|stringformat:"s" == "5" %}selected{% endif %}>5</option>
          <option value="10" {% if request.session.num_per_page|stringformat:"s" == "10" or not request.session.num_per_page %}selected{% endif %}>10</option>
          <option value="20" {% if request.session.num_per_page|stringformat:"s" == "20" %}selected{% endif %}>20</option>
          <option value="50" {% if request.session.num_per_page|stringformat:"s" == "50" %}selected{% endif %}>50</option>
        </select>
      </div>

      <!-- Pagination Nav -->
      <nav aria-label="Pagination" class="isolate inline-flex -space-x-px rounded-md">
        <!-- Prev -->
        {% if page_obj.has_previous %}
          <a href="?page={{ page_obj.previous_page_number }}{% if request.session.num_per_page %}&num_per_page={{ request.session.num_per_page }}{% endif %}"
             class="relative inline-flex items-center rounded-l-md px-2 py-2 text-gray-500 dark:text-gray-400 border border-gray-300 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-white/5">
            <span class="sr-only">Previous</span>
            <svg viewBox="0 0 20 20" fill="currentColor" class="size-5">
              <path d="M11.78 5.22a.75.75 0 0 1 0 1.06L8.06 10l3.72 3.72a.75.75 0 1 1-1.06 1.06l-4.25-4.25a.75.75 0 0 1 0-1.06l4.25-4.25a.75.75 0 0 1 1.06 0Z"/>
            </svg>
          </a>
        {% endif %}

        <!-- Page Numbers -->
        {% for num in page_obj.paginator.page_range %}
          {% if num == 1 or num == page_obj.paginator.num_pages or num >= page_obj.number|add:"-2" and num <= page_obj.number|add:"2" %}
            {% if page_obj.number == num %}
              <a href="?page={{ num }}{% if request.session.num_per_page %}&num_per_page={{ request.session.num_per_page }}{% endif %}"
                 aria-current="page"
                 class="relative z-10 inline-flex items-center bg-indigo-600 dark:bg-indigo-500 px-4 py-2 text-sm font-semibold text-white">
                {{ num }}
              </a>
            {% else %}
              <a href="?page={{ num }}{% if request.session.num_per_page %}&num_per_page={{ request.session.num_per_page }}{% endif %}"
                 class="relative inline-flex items-center px-4 py-2 text-sm font-semibold text-gray-700 dark:text-gray-200 border border-gray-300 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-white/5">
                {{ num }}
              </a>
            {% endif %}
          {% elif num == 2 and page_obj.number > 4 %}
            <span class="relative inline-flex items-center px-4 py-2 text-sm font-semibold text-gray-400">…</span>
          {% elif num == page_obj.paginator.num_pages|add:"-1" and page_obj.number < page_obj.paginator.num_pages|add:"-3" %}
            <span class="relative inline-flex items-center px-4 py-2 text-sm font-semibold text-gray-400">…</span>
          {% endif %}
        {% endfor %}

        <!-- Next -->
        {% if page_obj.has_next %}
          <a href="?page={{ page_obj.next_page_number }}{% if request.session.num_per_page %}&num_per_page={{ request.session.num_per_page }}{% endif %}"
             class="relative inline-flex items-center rounded-r-md px-2 py-2 text-gray-500 dark:text-gray-400 border border-gray-300 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-white/5">
            <span class="sr-only">Next</span>
            <svg viewBox="0 0 20 20" fill="currentColor" class="size-5">
              <path d="M8.22 5.22a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.75.75 0 0 1-1.06-1.06L11.94 10 8.22 6.28a.75.75 0 0 1 0-1.06Z"/>
            </svg>
          </a>
        {% endif %}
      </nav>
    </div>
  </div>
</div>
